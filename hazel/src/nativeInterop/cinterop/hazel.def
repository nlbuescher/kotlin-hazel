package = hazel.cinterop
compilerOpts = -Isrc/nativeInterop/include
---
#include <stddef.h> // for size_t and uint64_t

static inline size_t sizeOf(void* a)
{
#if defined(_WIN32)
	return _msize(a);
#elif defined(__APPLE__)
	return malloc_size(a);
#else
	return malloc_usable_size(a);
#endif
}

// obsolete in master (posix platform lib there defines _DARWIN_C_SOURCE, which enables this function)
#if defined(__APPLE__)
static inline int pthread_threadid(pthread_t thread, uint64_t* id)
{
	return pthread_threadid_np(thread, id);
}
#endif

#define STB_IMAGE_IMPLEMENTATION
#define STBI_NO_FAILURE_STRINGS
#include <stb_image.h>

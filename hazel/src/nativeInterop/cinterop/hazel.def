package = hazel.cinterop

depends = posix

---

// obsolete in master (posix platform lib there defines _DARWIN_C_SOURCE, which enables this function)
#if defined(__APPLE__)
#include <pthread.h>
#include <stdint.h>

static inline int pthread_threadid(pthread_t thread, uint64_t* id)
{
	return pthread_threadid_np(thread, id);
}
#endif

static inline long sizeOf(void* a)
{
#if defined(_WIN32)
	return _msize(a);
#elif defined(__APPLE__)
	return malloc_size(a);
#else
	return malloc_usable_size(a);
#endif
}
